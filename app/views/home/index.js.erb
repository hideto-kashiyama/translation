  //Web Speech Synthesis API（音声合成API）
 //参考https://github.com/codegrid/2016-web-speech-api/blob/gh-pages/speech_synthesis/demo_simple_en.html
//$(function() {
 //var selectval=$("input[name='je']:checked").val(); //$('[name=gengo]').val();
  //英語0 日本語1
//console.log(selectval);
   
  //helpers/home_helper.rb  translate英訳　translatej 和訳
  if(gid==1) {
       var transtext="<%= translate %>";
       
     } else {
     
        var transtext="<%= translatej%>";
     }  
 
 var txt=transtext.replace( /&amp;#39;/g , "'" );

 $('#txtTarget').val(txt);
 
  
 var text =  $('#txtTarget').val();
 
    var uttr = new SpeechSynthesisUtterance();
    uttr.text = text;
     if(gid==1) {
        uttr.lang = 'en-US';
       speechSynthesis.speak(uttr);
      
     } else {
     
      var radio_sp= $("input[name='sp']:checked").val();　//日本語音声選択値 0 :AITalk_ruby  1:AITalk_js    2:google
         
         if ( radio_sp==2 ) {
             
           uttr.lang = 'ja-JP';
           speechSynthesis.speak(uttr);
           
          } else {
          
      
            if ( radio_sp==0 ) {
            
             $("#aimbtn").click();//AITalk ruby音声
            
           } else {
         
            setTimeout(function(){
            txt1="";
            $('.translabel').text("");
            $('.translabel').text("翻訳完了！");
            tenmetut('translabel');//点滅
            
              start();//AITalk javascript音声
              console.log("AITjs")
    
            },10);
    
        }
    
          
      }   

     }
     
    <%= atk %>
     

 
 

 

